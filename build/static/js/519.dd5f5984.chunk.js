"use strict";(self.webpackChunkctlotus_valuation=self.webpackChunkctlotus_valuation||[]).push([[519],{89791:function(e,t,n){n.r(t),n.d(t,{Customer:function(){return O}});var i=n(19860),l=n(10437),o=n(47313),a=n(1413),r=n(74165),c=n(15861),s=n(29439),d=n(47131),u=n(70501),p=n(61113),x=n(48310),h=n(45624),m=n(63501),g=n(64351),f=n(2220),b=n(26002),Z=n(7810),v=n(81511),j=n(27314),y=n(24511),k=n(33222),w=n(97890),C=n(29466),D=n(52387),T=n(25645),S=n(14310),I=n(10658),R=n.n(I),F=n(65165),M=n(31538),E=n(75184),Y=n(31421),L=n(68161),N=n(16031),A=n(61548),P=n(17326),H=n(7791),z=n(83294),V=n(4942),U=n(17592),W=(0,U.ZP)(l.Z)((function(e){var t,n=e.theme;return t={width:"258px",display:"inline-flex",backgroundColor:"".concat(n.palette.common.white," !important"),alignItems:"center",borderRadius:"8px",height:"44px"},(0,V.Z)(t,n.breakpoints.down("sm"),{width:"100%"}),(0,V.Z)(t,"input",{fontSize:"16px",paddingLeft:"16px",border:"none",height:"100%",width:"100%",outline:"none",background:"".concat(n.palette.secondary.lighter)}),t})),_=((0,U.ZP)("img")((function(e){e.theme;return{width:"40px",height:"40px",paddingLeft:"16px"}})),n(66253)),K=n(46417);function q(e){var t=(0,i.Z)(),n=(0,y.$)().t,a=e.isFilter,r=e.onChangeSearchInput,c=e.filterList,d=e.submitFilter,u=((0,k.I0)(),(0,_.RF)().actions,(0,C.lr)()),x=(0,s.Z)(u,2),h=x[0],m=(x[1],(0,o.useState)((function(){var e;return null!==h&&void 0!==h&&h.get("query")?null===h||void 0===h||null===(e=h.get("query"))||void 0===e?void 0:e.replace("%2B","+"):""}))),g=(0,s.Z)(m,2),f=g[0],b=g[1],Z=(0,o.useRef)();return(0,K.jsxs)(l.Z,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},color:t.palette.secondary.contrastText,bgcolor:M.Z.primary.barList,borderRadius:"8px",mb:"15px",p:"20px 20px 8px 20px"},children:[(0,K.jsxs)(W,{className:"input",sx:{bgcolor:M.Z.common.white,"& input::placeholder":{color:"#AFAFAF"},border:"1px solid #D3D3D3",borderRadius:"8px",mr:"15px"},children:[(0,K.jsx)(p.Z,{sx:{fontSize:14,fontWeight:500,color:"#222222",background:t.palette.common.white,p:"0px 8px 0px 8px",mb:"45px",ml:"12px",position:"absolute"},children:"T\u1eeb kho\xe1 t\xecm ki\u1ebfm"}),(0,K.jsx)("input",{style:{borderRadius:"8px",backgroundColor:M.Z.common.white,fontSize:14,fontWeight:400,paddingRight:"15px"},type:"text",placeholder:"Nh\u1eadp t\u1eeb kho\xe1 t\xecm ki\u1ebfm",onChange:function(e){b(e.target.value),Z.current&&clearTimeout(Z.current),Z.current=setTimeout((function(){r(e.target.value.replaceAll("+","%2B"))}),500)},value:f})]}),(0,K.jsx)(l.Z,{sx:{display:"flex",gap:{xs:"12px",sm:"0px"},alignItems:"center"},children:null===c||void 0===c?void 0:c.map((function(e){return(0,K.jsx)(o.Fragment,{children:"date"!==e.type&&(0,K.jsx)(z.Z,{label:e.label,list:e.options,handleSelected:e.handleSelected})},e.label)}))}),(0,K.jsxs)(l.Z,{sx:{display:"flex",gap:{xs:"12px",sm:"0px"},alignItems:"center"},children:[null===c||void 0===c?void 0:c.map((function(e){return(0,K.jsx)(o.Fragment,{children:"date"===e.type&&(0,K.jsx)(H.Z,{onChange:e.onChange,placeholder:null===e||void 0===e?void 0:e.placeholder,sx:{width:"213px"}})},e.label)})),(0,K.jsx)(p.Z,{sx:{fontSize:14,fontWeight:500,color:"#222222",background:t.palette.common.white,p:"0px 8px 0px 8px",mb:"47px",ml:"12px",position:"absolute"},children:"Th\u1eddi gian"})]}),a&&(0,K.jsx)(T.Z,{title:n(j.I.common.search),buttonMode:"filter",sxProps:{background:t.palette.common.white,color:M.Z.primary.button,border:"1px solid ".concat(M.Z.primary.button),borderRadius:"8px",":hover":{background:t.palette.common.white}},sxPropsText:{fontSize:"16px",fontWeight:400},handleClick:function(){null===d||void 0===d||d()}})]})}function B(){var e=(0,A.Jg)().actions,t=(0,w.s0)(),n=(0,b.Un)(),I=(0,i.Z)(),H=(0,o.useRef)(null),z=(0,o.useRef)(null),V=(0,g.kh)().actions,U=(0,y.$)(),W=U.t,_=(U.i18n,(0,k.I0)()),B=(0,k.v9)(P.H),O=B.customerManager,G=B.isLoading,$=(0,o.useMemo)((function(){return{page:1,limit:10}}),[]),J=(0,o.useState)($),Q=(0,s.Z)(J,2),X=Q[0],ee=Q[1],te=(0,o.useState)(""),ne=(0,s.Z)(te,2),ie=ne[0],le=ne[1],oe=(0,o.useState)(!1),ae=(0,s.Z)(oe,2),re=ae[0],ce=ae[1],se=(0,o.useState)(D.qb.INACTIVE),de=(0,s.Z)(se,2),ue=(de[0],de[1],(0,o.useState)(0)),pe=(0,s.Z)(ue,2),xe=(pe[0],pe[1],(0,o.useMemo)((function(){return[{id:"id",label:"M\xe3 KH",align:"left",width:130},{id:"srouce",label:"Ngu\u1ed3n",align:"left",width:100},{id:"TVVID",label:"M\xe3 TVV",width:110,align:"left"},{id:"TVVName",label:"T\xean TVV",width:170,align:"left"},{id:"custype",label:"Lo\u1ea1i kh\xe1ch h\xe0ng",width:200,align:"left"},{id:"cusName",label:"T\xean kh\xe1ch h\xe0ng",width:170,align:"left"},{id:"birthday",label:"Ng\xe0y sinh",width:110,align:"left"},{id:"email",label:"\u0110\u1ecba ch\u1ec9 Email",width:160,align:"left"},{id:"phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",width:130,align:"left"},{id:"address",label:"\u0110\u1ecba ch\u1ec9 li\xean l\u1ea1c",width:200,align:"left"},{id:"idperson",label:"CMND/ CCCD",width:150,align:"left"},{id:"createDate",label:"Ng\xe0y t\u1ea1o",width:110,align:"left"},{id:"note",label:"Ghi ch\xfa",width:170,align:"left"},{id:"options",label:"",width:110,align:"left"}]}),[W]));(0,o.useEffect)((function(){return function(){_(e.clearListCustomer())}}),[]);var he=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files){e.next=5;break}return e.next=3,F.Z.uploadFileCustomer(t.target.files[0]);case 3:e.sent?(be(ge),_(V.updateSnackbar({message:"Upload file excel th\xe0nh c\xf4ng",type:"success"}))):_(V.updateSnackbar({message:"Upload file excel kh\xf4ng th\xe0nh c\xf4ng",type:"error"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=(0,b.L0)({onFetchData:function(e){be(e)},defaultFilter:$}),ge=me.filter,fe=me.onFilterToQueryString,be=function(t){_(e.fetchListCustomer(t))},Ze=function(e){t("/customer/customers-potential/".concat(e))},ve=function(){ce(!0)},je=(0,o.useMemo)((function(){return[{label:"Lo\u1ea1i kh\xe1ch h\xe0ng",options:[{label:"Ch\u1ecdn lo\u1ea1i kh\xe1ch h\xe0ng",value:""},{label:"KH ti\u1ec1m n\u0103ng",value:D.Sl.POTENTIAL},{label:"KH quan t\xe2m",value:D.Sl.INTERESTED},{label:"KH ph\xe1t sinh h\u1eb1ng ng\xe0y",value:D.Sl.DAILY}],handleSelected:function(e){ee((0,a.Z)((0,a.Z)({},X),{},{groupType:e}))}},{label:"Th\u1eddi gian",type:"date",placeholder:"T\u1eeb ng\xe0y",options:[],onChange:function(e){e?ee((0,a.Z)((0,a.Z)({},X),{},{startDate:R()(e).format("YYYY-MM-DD")})):(null===X||void 0===X||delete X.startDate,ee(X))}},{label:"",type:"date",placeholder:"\u0110\u1ebfn ng\xe0y",options:[],onChange:function(e){e?ee((0,a.Z)((0,a.Z)({},X),{},{endDate:R()(e).format("YYYY-MM-DD")})):(null===X||void 0===X||delete X.endDate,ee(X))}}]}),[X]),ye=function(e){Ze(e.id)};return(0,K.jsxs)(u.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,K.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,K.jsx)(p.Z,{fontSize:"20px",fontWeight:"700",color:M.Z.primary.text,children:W(j.I.sidebar.customerPotential)}),(0,K.jsxs)(l.Z,{style:{display:"flex"},children:[(0,K.jsx)(T.Z,{title:"Upload file Excel",isHide:!(0,L.wI)(Y.T.CUSTOMER_CREATE,n),isIcon:!0,buttonMode:"excel",sxProps:{background:M.Z.primary.button,borderRadius:1,mb:"20px"},handleClick:function(){var e;null===(e=z.current)||void 0===e||e.click()}}),(0,K.jsx)("input",{type:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ref:z,onChange:he,style:{display:"none"}}),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(T.Z,{title:"T\u1ea3i",isIcon:!0,propRef:H,buttonMode:"download",sxProps:{background:M.Z.primary.button,borderRadius:1,m:"0px 15px 20px 15px"},handleClick:ve}),(0,K.jsx)(E.Z,{open:re,onClose:function(){ce(!1)},anchorEl:H.current,sx:{width:"max-content"},children:(0,K.jsxs)(x.Z,{children:[(0,K.jsx)(h.Z,{sx:{":hover":{backgroundColor:"#FDEAF4"},m:"6px",borderRadius:"4px"},onClick:ve,children:(0,K.jsx)(C.rU,{style:{color:"transparent"},to:"/static/template/template_Customer.xlsx",download:"Template_KhachHang",target:"_blank",children:(0,K.jsx)(l.Z,{display:"flex",alignItems:"center",children:(0,K.jsx)(p.Z,{ml:1,fontSize:"14px",fontWeight:400,color:I.palette.common.black,children:"T\u1ea3i template"})})})}),(0,K.jsx)(h.Z,{sx:{":hover":{backgroundColor:"#FDEAF4"},m:"6px",borderRadius:"4px"},children:(0,K.jsx)(l.Z,{display:"flex",alignItems:"center",onClick:function(){F.Z.downloadCustomerExcel()},children:(0,K.jsx)(p.Z,{ml:1,fontSize:"14px",fontWeight:400,color:I.palette.common.black,children:"T\u1ea3i danh s\xe1ch kh\xe1ch h\xe0ng"})})})]})})]}),(0,K.jsx)(T.Z,{title:"Th\xeam KH",isIcon:!0,isHide:!(0,L.wI)(Y.T.CUSTOMER_CREATE,n),buttonMode:"create",sxProps:{background:M.Z.primary.button,borderRadius:1,mb:"20px"},handleClick:function(){return t(S.Z.createCustomer)}})]})]}),(0,K.jsx)(q,{onChangeSearchInput:function(e){le(e),fe((0,a.Z)((0,a.Z)({},ge),{},{search:e,page:1}))},placeholder:W(j.I.common.search),isFilter:!0,filterList:je,submitFilter:function(){fe((0,a.Z)((0,a.Z)({},X),{},{page:1,search:ie}))}}),(0,K.jsx)(f.Z,{headers:xe,renderItem:function(e,t){var n,i,l,o,a,r,c,s="".concat(null!==e&&void 0!==e&&e.street?"".concat(e.street,","):""," ").concat(null!==e&&void 0!==e&&e.ward?"".concat(e.ward,","):""," ").concat(null!==e&&void 0!==e&&e.district?"".concat(e.district,","):""," ").concat(null!==e&&void 0!==e&&e.province?"".concat(e.province):"").trim();return[(0,K.jsx)(m.D,{text:"".concat(e.code),line:1,color:"#007AFF",handleClick:function(t){t.stopPropagation(),ye(e)}}),(0,K.jsx)(m.D,{text:"".concat(null!==e&&void 0!==e&&e.source?(0,N.get)(D.iG,null===e||void 0===e?void 0:e.source):""),line:2}),(0,K.jsx)(m.D,{text:"".concat(null!==(n=null===(i=e.staff)||void 0===i?void 0:i.code)&&void 0!==n?n:""),line:1}),(0,K.jsx)(m.D,{text:"".concat(null!==(l=null===(o=e.staff)||void 0===o?void 0:o.fullName)&&void 0!==l?l:""),line:2}),(0,K.jsx)(m.D,{text:"".concat((0,L.xL)(e.groupType)),line:2}),(0,K.jsx)(m.D,{text:"".concat(null!==(a=e.name)&&void 0!==a?a:""),line:2}),(0,K.jsx)(m.D,{text:"".concat(R()(e.birth).format("DD/MM/YYYY")),line:1}),(0,K.jsx)(m.D,{text:"".concat(null!==(r=e.email)&&void 0!==r?r:""),line:1}),(0,K.jsx)(m.D,{text:"".concat(null!==(c=e.phoneNumber)&&void 0!==c?c:""),line:1}),(0,K.jsx)(m.D,{text:"".concat(null!==s&&void 0!==s?s:""),line:2}),(0,K.jsx)(m.D,{text:"".concat(e.identityNumber),line:1}),(0,K.jsx)(m.D,{text:"".concat(R()(e.createdAt).format("DD/MM/YYYY")),line:1}),(0,K.jsx)(m.D,{text:"".concat(e.note||"-"),line:2}),(0,K.jsxs)("div",{style:{display:"flex"},children:[(0,K.jsx)(d.Z,{onClick:function(){return Ze(e.id)},children:(0,K.jsx)("img",{src:v.Z,alt:"icon edit"})}),(0,K.jsx)(d.Z,{sx:{ml:2},children:(0,K.jsx)("img",{alt:"Trash icon",src:Z.Z})})]})]},items:null===O||void 0===O?void 0:O.data,pageNumber:ge.page,totalElements:null===O||void 0===O?void 0:O.total,sort:ge.orderBy,limitElement:ge.limit,onPageChange:function(e){fe((0,a.Z)((0,a.Z)({},ge),{},{page:e}))},onPageSizeChange:function(e){fe((0,a.Z)((0,a.Z)({},ge),{},{page:1,limit:e}))},isLoading:G})]})}function O(){var e=(0,i.Z)();return(0,K.jsx)(o.Fragment,{children:(0,K.jsx)(l.Z,{bgcolor:e.palette.grey[0],p:3,sx:{marginLeft:{xs:"12px",sm:"24px",lg:"0px"},marginRight:{xs:"12px",sm:"24px",lg:"0px"},borderRadius:3,mt:"-10px",minHeight:"calc(99%)"},children:(0,K.jsx)(B,{})})})}}}]);