"use strict";(self.webpackChunkctlotus_valuation=self.webpackChunkctlotus_valuation||[]).push([[328],{79328:function(e,t,n){n.r(t),n.d(t,{ProductTableSetting:function(){return Zt}});var r=n(1413),i=n(45987),a=n(74165),o=n(15861),c=n(29439),s=n(19860),l=n(10437),d=n(61113),u=n(70501),p=n(28485),h=n(65280),x=n(35898),m=n(25645),g=n(47313),f=n(33222),b=n(97890),j=n(29466),v=n(31538),Z=n(88476),y=n(73151),P=n(14310),k=n(18338),S=n(30986),w=n(64351),T=n(91486),C=n(35381),D=n(64276),F=n(31881),I=n.n(F),A=(0,a.Z)().mark(E),R=(0,a.Z)().mark(L),U=(0,a.Z)().mark(z);function E(e){var t;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,D.RE)(k.Z.getGroundProductTable,e.payload);case 3:return t=n.sent,n.next=6,(0,D.gz)(G.getGroundProductTableSuccess(t));case 6:e.meta&&(null===e||void 0===e||e.meta({success:!0})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),e.meta&&(null===e||void 0===e||e.meta({success:!1,response:n.t0.response}));case 12:case"end":return n.stop()}}),A,null,[[0,9]])}function L(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,D.RE)(k.Z.createGroundProductTable,e.payload);case 3:e.meta({success:!0}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),I().isAxiosError(t.t0)&&e.meta({success:!1,code:t.t0.code,response:t.t0.response});case 9:case"end":return t.stop()}}),R,null,[[0,6]])}function z(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.Fm)(G.getGroundProductTable.type,E);case 2:return e.next=4,(0,D.Fm)(G.createGroundProductTable.type,L);case 4:case"end":return e.stop()}}),U)}var M,N={isLoading:!1},O=(0,T.o)({name:"groundProductTable",initialState:N,reducers:{getGroundProductTable:{reducer:function(e){return e.isLoading=!0,e},prepare:function(e,t){return{payload:e,meta:t}}},getGroundProductTableSuccess:function(e,t){e.groundProductTableData=t.payload,e.isLoading=!1},createGroundProductTable:{reducer:function(e){return e},prepare:function(e,t){return{payload:e,meta:t}}},createGroundProductTableSuccess:function(){},clearGroundProductTable:function(e){e.groundProductTableData=null}}}),G=O.actions,V=function(){return(0,C.v)({key:O.name,reducer:O.reducer}),(0,C.h)({key:O.name,saga:z}),{actions:O.actions}},W=n(3954),B=n(53675),q=n(2220),H=n(69099),_=n(85093),X=n(50497),J=n(46417),Q=function(e){var t=e.onFileChange,n=(0,f.I0)(),i=(0,w.kh)().actions,c=(0,g.useCallback)(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r,o){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.length){e.next=2;break}return e.abrupt("return",n(i.updateSnackbar({message:"File kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng",type:"error"})));case 2:t&&r.length>0&&t(r[0]);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,i,t]),s=(0,_.uI)({onDrop:c,accept:{"image/jpeg":[".jpeg",".jpg",".png"],"image/png":[".png"]},maxFiles:1}),u=s.getRootProps,p=s.getInputProps;s.isDragActive;return(0,J.jsxs)(l.Z,(0,r.Z)((0,r.Z)({sx:{height:"100%",minHeight:"70vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},u()),{},{children:[(0,J.jsx)(l.Z,{component:"label",children:(0,J.jsx)("input",(0,r.Z)((0,r.Z)({},p()),{},{id:"upload",hidden:!0,type:"file",accept:"*","max-file-size":"5120"}))}),(0,J.jsx)(d.Z,{sx:{fontSize:"16px",fontWeight:400,textAlign:"center",mb:2},children:"Ch\u01b0a c\xf3 \u1ea3nh m\u1eb7t b\u1eb1ng t\u1ed5ng th\u1ec3"}),(0,J.jsx)("img",{src:X.Z,alt:""}),(0,J.jsx)(d.Z,{sx:{fontSize:"16px",fontWeight:400,textAlign:"center",mb:2,mt:1.75},children:"K\xe9o th\u1ea3 file ho\u1eb7c nh\u1ea5n v\xe0o n\xfat b\xean d\u01b0\u1edbi \u0111\u1ec3 t\u1ea3i \u1ea3nh l\xean"}),(0,J.jsx)(H.Z,{size:"medium",variant:"outlined",sx:{color:v.Z.primary.button,border:"1px solid ".concat(v.Z.primary.button),textTransform:"none","&:hover":{border:"1px solid ".concat(v.Z.primary.button)}},children:"T\u1ea3i file l\xean"})]}))},K={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},Y=new Uint8Array(16);function $(){if(!M&&!(M="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return M(Y)}for(var ee=[],te=0;te<256;++te)ee.push((te+256).toString(16).slice(1));function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(ee[e[t+0]]+ee[e[t+1]]+ee[e[t+2]]+ee[e[t+3]]+"-"+ee[e[t+4]]+ee[e[t+5]]+"-"+ee[e[t+6]]+ee[e[t+7]]+"-"+ee[e[t+8]]+ee[e[t+9]]+"-"+ee[e[t+10]]+ee[e[t+11]]+ee[e[t+12]]+ee[e[t+13]]+ee[e[t+14]]+ee[e[t+15]]).toLowerCase()}var re=function(e,t,n){if(K.randomUUID&&!t&&!e)return K.randomUUID();var r=(e=e||{}).random||(e.rng||$)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return ne(r)},ie=n(68161),ae=n(30604),oe=n(80326),ce=n(33699),se=function(e){var t=e.currentGroundImage,n=e.groundProductTableData,r=e.onDelete,i=(0,g.useState)(!1),a=(0,c.Z)(i,2),o=a[0],s=a[1];return(0,J.jsxs)(g.Fragment,{children:[(0,J.jsxs)(x.Z,{direction:"row",alignItems:"center",spacing:5,sx:{py:1.25,px:3,mb:2,borderRadius:1,border:"1px solid #C8CBCF"},children:[(0,J.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",flex:1},children:[(0,J.jsx)(l.Z,{component:"img",src:X.Z,alt:"icon excel",sx:{width:35,height:35}}),(0,J.jsx)(d.Z,{color:"primary.hint",sx:{ml:1.25},children:null!==t&&void 0!==t&&t.path?null===t||void 0===t?void 0:t.path:"".concat("https://devapi.ctlotus.ctgroupvietnam.com").concat(null===n||void 0===n?void 0:n.file.substring(4))})]}),(0,J.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,J.jsx)("img",{src:oe.Z,alt:"icon check success",style:{marginRight:"28px"}}),(0,J.jsx)("img",{src:ce.Z,style:{cursor:"pointer"},alt:"icon trash",onClick:function(){return s(!0)}})]})]}),(0,J.jsx)(ae.Z,{isOpen:o,handleClose:function(){return s(!1)},handleSubmit:function(){null===r||void 0===r||r()},isIcon:!1,actionName:"X\xe1c nh\u1eadn",children:(0,J.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,J.jsx)(d.Z,{fontSize:"24px",fontWeight:700,width:400,color:v.Z.primary.text,mx:"auto",mb:2,mt:2,textAlign:"center",children:"Xo\xe1 \u1ea3nh m\u1eb7t b\u1eb1ng"}),(0,J.jsx)(d.Z,{fontSize:"16px",fontWeight:400,color:v.Z.primary.text,mb:5,textAlign:"center",children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafc mu\u1ed1n xo\xe1 \u1ea3nh m\u1eb7t b\u1eb1ng hi\u1ec7n t\u1ea1i kh\xf4ng?"})]})})]})},le=function(e){var t=e.currentGroundImage,n=e.groundProductTableData,r=e.onDelete,i=(0,g.useCallback)((0,o.Z)((0,a.Z)().mark((function e(){var r,i,o,c,s,l,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=re(),!(n&&n.jsonGround&&null!==n&&void 0!==n&&n.file)){e.next=7;break}return(i=JSON.parse(null===n||void 0===n?void 0:n.jsonGround)).artboards[0].image_url=t?URL.createObjectURL(t):"".concat("https://devapi.ctlotus.ctgroupvietnam.com").concat(null===n||void 0===n?void 0:n.file.substring(4)),localStorage.setItem("imageMapProLastSave",i.id),localStorage.setItem("imageMapProSaves",JSON.stringify([i])),e.abrupt("return");case 7:if(!t){e.next=23;break}return e.prev=8,o=URL.createObjectURL(t),e.next=12,(0,ie.TS)(o);case 12:c=e.sent,s=c.width,l=c.height,d=[{id:r,artboards:[{background_type:"image",image_url:o,use_image_size:!0,width:s,height:l,children:[{id:re(),title:"Block A",type:"group"}]}],version:"6.0.8",general:{name:"Untitled"},lastSaved:(new Date).getTime()}],localStorage.setItem("imageMapProLastSave",r),localStorage.setItem("imageMapProSaves",JSON.stringify(d)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),console.error("Error:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[8,20]])}))),[t,n]);return(0,g.useEffect)((function(){return i(),function(){localStorage.removeItem("imageMapProLastSave"),localStorage.removeItem("imageMapProSaves")}}),[t,n,i]),(0,g.useEffect)((function(){var e=document.createElement("script");return e.src="/js/main.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e),window.ImageMapPro=void 0}}),[t]),(0,J.jsxs)(g.Fragment,{children:[(0,J.jsx)(se,{onDelete:function(){return!!r&&r()},currentGroundImage:t,groundProductTableData:n}),(0,J.jsx)(l.Z,{sx:{width:"100%",height:"100%"},id:"image-map-pro-editor"})]})},de=n(35323),ue=(0,de.P1)([function(e){return e.groundProductTable||N}],(function(e){return e})),pe=function(e){var t=e.onFileChange,n=e.currentGroundImage,r=(0,b.UO)().id,i=(0,f.I0)(),a=V().actions,o=(0,w.kh)().actions,s=(0,g.useState)(!1),l=(0,c.Z)(s,2),d=l[0],u=l[1],p=(0,f.v9)(ue),h=p.groundProductTableData,x=p.isLoading,m=!!h&&h.data.length>0,j=function(e){t(e)},v=function(){u(!0),j(null)};(0,g.useEffect)((function(){r&&i(a.getGroundProductTable({id:r},(function(e){null!==e&&void 0!==e&&e.success||i(o.updateSnackbar({message:"L\u1ea5y th\xf4ng tin b\u1ea3ng h\xe0ng kh\xf4ng th\xe0nh c\xf4ng",type:"error"}))})))}),[i,r,a]);return(0,J.jsx)(J.Fragment,{children:x?(0,J.jsx)(q.a,{children:(0,J.jsx)("img",{src:"/static/loader/spinner.svg",alt:"",width:100,height:100})},"hey"):!x&&m?d&&!n?(0,J.jsx)(Q,{onFileChange:j}):d&&n?(0,J.jsx)(le,{onDelete:v,currentGroundImage:n,groundProductTableData:h}):d?(0,J.jsx)(Q,{onFileChange:j}):(0,J.jsx)(le,{onDelete:v,currentGroundImage:n,groundProductTableData:h}):n?(0,J.jsx)(le,{onDelete:v,currentGroundImage:n,groundProductTableData:h}):(0,J.jsx)(Q,{onFileChange:j})})},he=n(9019),xe=n(47131),me=n(90210),ge=n(1983),fe=n(43270),be=n(23195),je=n(10237),ve=n(22611),Ze=n(80827),ye=(0,a.Z)().mark(Te),Pe=(0,a.Z)().mark(Ce),ke=(0,a.Z)().mark(De),Se=(0,a.Z)().mark(Fe),we=(0,a.Z)().mark(Ie);function Te(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,D.RE)(k.Z.createProductTable,e.payload);case 3:e.meta({success:!0}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.meta({success:!1,response:t.t0.response});case 9:case"end":return t.stop()}}),ye,null,[[0,6]])}function Ce(e){var t,n,r,i;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.payload,n=t.id,r=t.formData,a.next=4,(0,D.RE)(k.Z.checkFileUpload,r);case 4:return i=a.sent,a.next=7,(0,D.gz)(Ue.checkFileUploadSuccess({file:r,result:i,id:n}));case 7:e.meta({success:!0}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),I().isAxiosError(a.t0)&&e.meta({success:!1,code:a.t0.code,response:a.t0.response});case 13:case"end":return a.stop()}}),Pe,null,[[0,10]])}function De(e){var t;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,D.RE)(k.Z.getProjectProductTable,e.payload);case 3:return t=n.sent,n.next=6,(0,D.gz)(Ue.getProductTableSuccess(t));case 6:e.meta&&(null===e||void 0===e||e.meta({success:!0})),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),e.meta&&(null===e||void 0===e||e.meta({success:!1,response:n.t0.response}));case 12:case"end":return n.stop()}}),ke,null,[[0,9]])}function Fe(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,D.RE)(k.Z.deleteProductIsCreated,e.payload);case 3:e.meta({success:!0}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.meta({code:null===t.t0||void 0===t.t0?void 0:t.t0.code,success:!1,response:t.t0.response});case 9:case"end":return t.stop()}}),Se,null,[[0,6]])}function Ie(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,D.Fm)(Ue.createProductTable.type,Te);case 2:return e.next=4,(0,D.Fm)(Ue.getProductTable.type,De);case 4:return e.next=6,(0,D.Fm)(Ue.checkFileUpload.type,Ce);case 6:return e.next=8,(0,D.Fm)(Ue.deleteProductIsCreated.type,Fe);case 8:case"end":return e.stop()}}),we)}var Ae={uploadedProductTableProjectList:[]},Re=(0,Ze.oM)({name:"productTableSlice",initialState:Ae,reducers:{getProductTable:{reducer:function(e){return e.isLoading=!0,e},prepare:function(e,t){return{payload:e,meta:t}}},getProductTableSuccess:function(e,t){e.productTableData=t.payload,e.isLoading=!1},createProductTable:{reducer:function(e){return e},prepare:function(e,t){return{payload:e,meta:t}}},checkFileUpload:{reducer:function(e){return e},prepare:function(e,t){return{payload:e,meta:t}}},checkFileUploadSuccess:function(e,t){var n=t.payload.file.get("file"),r=t.payload.result;if(e.currentUploadedFile=n,e.uploadedProductTableList=r,t.payload.id&&e.uploadedProductTableProjectList){var i=t.payload.id,a={id:i,currentUploadedFile:n,uploadedProductTableList:r},o=e.uploadedProductTableProjectList.findIndex((function(e){return e.id===i}));-1!==o?e.uploadedProductTableProjectList[o]=a:e.uploadedProductTableProjectList.push(a)}},clearCurrentUploadedFile:function(e,t){e.currentUploadedFile=null,e.uploadedProductTableList=void 0;var n=t.payload.id,r=e.uploadedProductTableProjectList.findIndex((function(e){return e.id===n}));-1!==r&&e.uploadedProductTableProjectList.splice(r,1)},clearProductTableData:function(e){e.productTableData=null},deleteProductIsCreated:{reducer:function(e){return e},prepare:function(e,t){return{payload:e,meta:t}}}}}),Ue=Re.actions,Ee=function(){return(0,C.v)({key:Re.name,reducer:Re.reducer}),(0,C.h)({key:Re.name,saga:Ie}),{actions:Re.actions}},Le=function(e){var t=e.floors;return(0,J.jsx)(he.ZP,{container:!0,direction:"column",rowSpacing:.5,sx:{width:40},children:t.slice().reverse().map((function(e,t){return(0,J.jsx)(he.ZP,{item:!0,children:(0,J.jsx)(d.Z,{variant:"caption",display:"inline-block",width:"100%",minHeight:28,sx:{display:"flex",alignItems:"center"},children:"F".concat(e)})},"".concat(e,"-").concat(t))}))})},ze=function(e){var t=e.products;return(0,J.jsx)(he.ZP,{container:!0,justifyContent:"flex-end",columnSpacing:.5,sx:{mt:.75},children:t.map((function(e,t){return(0,J.jsx)(he.ZP,{item:!0,children:(0,J.jsx)(d.Z,{variant:"caption",display:"inline-block",width:28,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:e})},"".concat(e,"-").concat(t))}))})},Me=["product","floor"],Ne=function(e){var t=e.fields,n=function(e,t){return(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(he.ZP,{container:!0,rowSpacing:.5,direction:"column",children:e.slice().reverse().map((function(e,n,r){return(0,J.jsx)(he.ZP,{container:!0,item:!0,columnSpacing:.5,flexWrap:"nowrap",children:t.map((function(t,n){return(0,J.jsx)(Oe,{product:t,floor:e},"".concat(t,"-").concat(n))}))},"".concat(e,"-").concat(n))}))})})};return(0,J.jsx)(g.Fragment,{children:(0,J.jsx)(l.Z,{sx:{borderRadius:"12px",backgroundImage:"url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='12' ry='12' stroke='%23C8CBCFFF' stroke-width='3' stroke-dasharray='4%2c11' stroke-dashoffset='11' stroke-linecap='square'/%3e%3c/svg%3e\")",px:2.25,py:2},children:(0,J.jsx)(l.Z,{sx:{display:"flex",scrollSnapType:"x mandatory",gap:"20px",overflowX:"auto"},children:t.map((function(e,t){var r=e.dataFloor.split(",").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()})),i=e.dataQuanlityProduct.split(",").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()}));return(0,J.jsxs)(x.Z,{children:[(0,J.jsx)(l.Z,{sx:{typography:"button",textAlign:"center",backgroundColor:v.Z.primary.button,borderRadius:"6px",color:"white",mb:.5},children:e.block}),(0,J.jsxs)(l.Z,{sx:{px:1.5,py:1.75,border:"1px solid #D45B7A",borderRadius:1,scrollSnapAlign:"start",display:"flex",flexDirection:"column",justifyContent:"end",flex:1},children:[(0,J.jsxs)(l.Z,{sx:{display:"flex"},children:[(0,J.jsx)(Le,{floors:r}),(0,J.jsx)(l.Z,{children:n(r,i)})]}),(0,J.jsx)(ze,{products:i})]})]},e.id)}))})})})},Oe=function(e){e.product,e.floor;var t=(0,i.Z)(e,Me);return(0,J.jsx)(he.ZP,(0,r.Z)((0,r.Z)({item:!0},t),{},{children:(0,J.jsx)(l.Z,{sx:{borderRadius:.5,border:"1px solid #E0E1E4",width:"28px",height:"28px"}})}))};var Ge=n.p+"static/media/colored-create-icon.aacd232c97c59fbb46deba3b7483cd20.svg",Ve=function(e){var t=e.append,n=e.fields,r=(0,fe.cI)({mode:"onChange",defaultValues:{name:"",numberOfFloors:"",productsPerFloors:""}}),i=r.control,a=r.handleSubmit,o=(r.register,r.reset),c=r.setError,s=r.clearErrors,l=r.formState,d=l.errors,u=l.isSubmitSuccessful;(0,g.useEffect)((function(){o()}),[u,o]);var p=(0,g.useCallback)((function(e){for(var t="",n=1;n<=e;n++){t+=n.toString().padStart(3,"0")+", "}return t=t.slice(0,-2)}),[]);return(0,J.jsx)("form",{onSubmit:a((function(e){if(s(),+e.numberOfFloors<=0||+e.productsPerFloors<=0)return+e.numberOfFloors<=0&&c("numberOfFloors",{type:"custom",message:"S\u1ed1 t\u1ea7ng ph\u1ea3i l\u1edbn h\u01a1n 0"}),void(+e.productsPerFloors<=0&&c("productsPerFloors",{type:"custom",message:"S\u1ed1 s\u1ea3n ph\u1ea9m ph\u1ea3i l\u1edbn h\u01a1n 0"}));t({block:e.name.trim(),dataFloor:p(+e.numberOfFloors),dataQuanlityProduct:p(+e.productsPerFloors)})})),children:(0,J.jsxs)(he.ZP,{container:!0,spacing:2,children:[(0,J.jsx)(he.ZP,{item:!0,xs:3,children:(0,J.jsx)(ge.Z,{name:"name",label:"T\xean block",placeholder:"Nh\u1eadp t\xean block",isRequired:!0,control:i,errors:d,rules:{validate:{isBlockNameValid:function(e){return n.every((function(t){return t.block.trim()!==e.trim()}))||"T\xean block \u0111\xe3 t\u1ed3n t\u1ea1i"}}}})}),(0,J.jsx)(he.ZP,{item:!0,xs:3,children:(0,J.jsx)(ge.Z,{name:"numberOfFloors",label:"S\u1ed1 t\u1ea7ng",placeholder:"Nh\u1eadp s\u1ed1 t\u1ea7ng",endAdornment:"T\u1ea7ng",format:"number",max:200,isRequired:!0,control:i,errors:d,setError:c})}),(0,J.jsx)(he.ZP,{item:!0,xs:!0,children:(0,J.jsx)(ge.Z,{name:"productsPerFloors",label:"S\u1ed1 SP/T\u1ea7ng",placeholder:"Nh\u1eadp s\u1ed1 s\u1ea3n ph\u1ea9m/t\u1ea7ng",endAdornment:"S\u1ea3n ph\u1ea9m",format:"number",max:200,isRequired:!0,control:i,errors:d,setError:c})}),(0,J.jsx)(he.ZP,{item:!0,xs:"auto",children:(0,J.jsx)(m.Z,{typeButton:"submit",title:"Th\xeam block",isIcon:!0,variant:"outlined",buttonMode:"create",iconNode:(0,J.jsx)("img",{src:Ge,alt:"Plus Icon"}),sxProps:{color:v.Z.primary.button,borderRadius:"8px",mt:1,width:"100%",flexShrink:"0"},sxPropsText:{fontWeight:400}})})]})})},We=(0,de.P1)([function(e){return e.productTableSlice||Ae}],(function(e){return e})),Be=["projectId"],qe=(0,g.forwardRef)((function(e,t){var n=(0,g.useState)(!0),a=(0,c.Z)(n,2),o=a[0],s=a[1],u=(0,b.UO)(),p=(0,f.I0)(),h=Ee().actions,x=(0,w.kh)().actions,m=(0,f.v9)(We).productTableData,j=(0,g.useState)(!1),Z=(0,c.Z)(j,2),y=Z[0],P=Z[1],k=u.id,S=(0,fe.cI)({mode:"onBlur"}),T=(0,fe.Dq)({control:S.control,name:"data"}),C=T.fields,D=T.append,F=T.remove,I=S.watch("data"),A=C.map((function(e,t){return(0,r.Z)((0,r.Z)({},e),I[t])})),R=(0,g.useMemo)((function(){return m&&m.length>0?m.map((function(e){e.projectId;return(0,i.Z)(e,Be)})):[]}),[m]);(0,g.useEffect)((function(){return k&&p(h.getProductTable({id:k},(function(e){null!==e&&void 0!==e&&e.success||p(x.updateSnackbar({message:"L\u1ea5y th\xf4ng tin b\u1ea3ng h\xe0ng kh\xf4ng th\xe0nh c\xf4ng",type:"error"}))}))),function(){p(h.clearProductTableData())}}),[h,p,k,x]),(0,g.useEffect)((function(){m&&m.length>0?P(!0):P(!1)}),[m]),(0,g.useEffect)((function(){S.reset({data:R})}),[R,S]);var U=function(e){var t=e.trim().split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),n=new Set(t);return t.length===n.size||"T\xean kh\xf4ng \u0111\u01b0\u1ee3c tr\xf9ng"},E=(0,g.useCallback)((function(e){var t=y?"C\u1eadp nh\u1eadt b\u1ea3ng h\xe0ng th\xe0nh c\xf4ng":"T\u1ea1o b\u1ea3ng h\xe0ng th\xe0nh c\xf4ng",n=y?"C\u1eadp nh\u1eadt b\u1ea3ng h\xe0ng kh\xf4ng th\xe0nh c\xf4ng":"T\u1ea1o b\u1ea3ng h\xe0ng kh\xf4ng th\xe0nh c\xf4ng";null!==e&&void 0!==e&&e.success?p(x.updateSnackbar({message:t,type:"success"})):p(x.updateSnackbar({message:n,type:"error"}))}),[p,x,y]);return(0,J.jsxs)(l.Z,{children:[(0,J.jsx)(Ve,{append:D,fields:A}),(0,J.jsx)(l.Z,{sx:{py:1.5,px:2.5,backgroundColor:"#F4F5F6",borderRadius:1.5,mt:2},children:(0,J.jsx)("form",{onSubmit:S.handleSubmit((function(e){var t=e.data.map((function(e){return{block:e.block.trim(),dataFloor:(0,ie.bT)(e.dataFloor),dataQuanlityProduct:(0,ie.bT)(e.dataQuanlityProduct)}})),n={id:k,data:t};p(h.createProductTable(n,E))})),ref:t,children:!!C.length&&(0,J.jsx)(he.ZP,{container:!0,alignItems:"center",columnSpacing:2,rowSpacing:.5,children:C.map((function(e,t){return(0,J.jsxs)(he.ZP,{container:!0,item:!0,spacing:2,children:[(0,J.jsx)(he.ZP,{item:!0,xs:3.5,children:(0,J.jsx)(ge.Z,{name:"data.".concat(t,".block"),placeholder:"Nh\u1eadp t\xean block",isRequired:!0,control:S.control,errors:S.formState.errors})}),(0,J.jsx)(he.ZP,{item:!0,xs:3.5,children:(0,J.jsx)(ge.Z,{name:"data.".concat(t,".dataFloor"),placeholder:"Nh\u1eadp s\u1ed1 t\u1ea7ng",isRequired:!0,control:S.control,errors:S.formState.errors,rules:{validate:{isValid:ie.vr,isUniqueName:U}}})}),(0,J.jsx)(he.ZP,{item:!0,xs:4,children:(0,J.jsx)(ge.Z,{name:"data.".concat(t,".dataQuanlityProduct"),placeholder:"Nh\u1eadp s\u1ed1 s\u1ea3n ph\u1ea9m/t\u1ea7ng",isRequired:!0,control:S.control,errors:S.formState.errors,rules:{validate:{isValid:ie.vr,isUniqueName:U}}})}),(0,J.jsx)(he.ZP,{item:!0,xs:1,sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:(0,J.jsx)(xe.Z,{"aria-label":"delete",onClick:function(){return F(t)},children:(0,J.jsx)(be.Z,{sx:{color:v.Z.primary.button}})})})]},e.id)}))})})}),(0,J.jsxs)(d.Z,{variant:"caption",component:"p",fontStyle:"italic",sx:{mt:1,color:"#D6465F"},children:[(0,J.jsx)("b",{children:"* L\u01b0u \xfd: "}),"S\u1ed1 t\u1ea7ng, s\u1ed1 s\u1ea3n ph\u1ea9m \u0111\u01b0\u1ee3c quy \u0111\u1ecbnh b\u1eb1ng s\u1ed1 c\xf3 3 k\xfd t\u1ef1 (c\xf3 th\u1ec3 bao g\u1ed3m s\u1ed1 v\xe0 k\xfd t\u1ef1. Vd 12A), \u0111\u01b0\u1ee3c ph\xe2n bi\u1ec7t b\u1edfi d\u1ea5u ph\u1ea9y \u201c,\u201d"]}),(0,J.jsxs)(d.Z,{variant:"body2",component:"span",sx:{display:"inline-flex",alignItems:"center",mt:2.5,mb:.5,color:"#7A7A7A",cursor:"pointer"},onClick:function(){return s(!o)},children:[(0,J.jsx)(me.Z,{component:o?je.Z:ve.Z,sx:{mr:1}}),"Xem tr\u01b0\u1edbc"]}),o&&(0,J.jsx)(Ne,{fields:A})]})}));qe.displayName="TestForm";var He=qe,_e=n(55910),Xe=n(94469),Je=n(33604),Qe=n(96467),Ke=n(51629),Ye=n(66835),$e=n(23477),et=n(24076),tt=n(57861),nt=n(4117),rt=n(17592),it=n(70941),at=n(8586);var ot=n.p+"static/media/upload-error.f2a86107a39ff931a261fb3e007753aa.svg",ct=(0,rt.ZP)(it.Z)((function(e){e.theme;return{paddingTop:12,paddingBottom:12,borderBottom:"1px solid #C8CBCF"}})),st=function(e){var t=e.isOpen,n=e.onClose,r=e.err,i=function(){null===n||void 0===n||n()};return(0,J.jsxs)(Xe.Z,{open:t,fullWidth:!0,maxWidth:"md",onClose:i,scroll:"paper",children:[(0,J.jsx)(Je.Z,{children:n?(0,J.jsx)(xe.Z,{"aria-label":"close",onClick:i,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,J.jsx)(at.Z,{})}):null}),(0,J.jsxs)(Qe.Z,{children:[(0,J.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,J.jsx)("img",{src:ot,alt:"upload fail img"}),(0,J.jsx)(d.Z,{textAlign:"center",sx:{fontSize:"1.5rem",lineHeight:"1.875rem",fontWeight:700,mt:2.75},children:"Upload b\u1ea3ng h\xe0ng l\u1ed7i"}),(0,J.jsx)(d.Z,{textAlign:"center",sx:{fontSize:"0.875rem",lineHeight:"1",mt:2},children:"File t\u1ea3i l\xean \u0111ang b\u1ecb l\u1ed7i, vui l\xf2ng ki\u1ec3m tra l\u1ea1i"})]}),(0,J.jsx)(Ke.Z,{component:u.Z,sx:{mt:2.25,border:"1px solid #C8CBCF"},children:(0,J.jsxs)(Ye.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,J.jsx)($e.Z,{children:(0,J.jsxs)(et.Z,{children:[(0,J.jsx)(ct,{children:"Stt"}),(0,J.jsx)(ct,{children:"S\u1ed1 d\xf2ng"}),(0,J.jsx)(ct,{children:"Nguy\xean nh\xe2n"})]})}),(0,J.jsx)(tt.Z,{children:r.map((function(e,t){return(0,J.jsxs)(et.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,J.jsx)(ct,{children:String(t+1).padStart(3,"0")}),(0,J.jsxs)(ct,{children:["D\xf2ng ",e.line]}),(0,J.jsx)(ct,{children:e.err})]},t)}))})]})})]}),(0,J.jsx)(nt.Z,{sx:{justifyContent:"center",py:2.5},children:(0,J.jsx)(m.Z,{variant:"outlined",title:"\u0110\xf3ng",sxProps:{borderRadius:1,minWidth:"125px"},sxPropsText:{fontWeight:400},handleClick:function(){return i()}})})]})},lt=function(e){var t=e.onUploadStateChange,n=(e.onChangeFile,(0,f.I0)()),i=Ee().actions,s=(0,w.kh)().actions,u=(0,b.UO)().id,p=(0,g.useState)(!1),h=(0,c.Z)(p,2),x=h[0],m=h[1],j=(0,g.useState)([]),Z=(0,c.Z)(j,2),y=Z[0],P=Z[1],k=(0,g.useCallback)(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r,o){var c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.length){e.next=2;break}return e.abrupt("return",n(s.updateSnackbar({message:"File kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng",type:"error"})));case 2:(c=new FormData).append("file",r[0]),c.append("sheetName","Sheet1"),c.append("firstRow","2"),n(i.checkFileUpload({id:u,formData:c},(function(e){if(null!==e&&void 0!==e&&e.success)t(!0);else{if(e.response&&e.response.data.error&&e.response.data.error.length>0){var n=e.response.data.error;P(n),m(!0)}t(!1)}})));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,s,u]),S=(0,_.uI)({onDrop:k,accept:{"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"]},maxFiles:1}),T=S.getRootProps,C=S.getInputProps;S.isDragActive;return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(l.Z,(0,r.Z)((0,r.Z)({sx:{height:"100%",minHeight:"70vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},T()),{},{children:[(0,J.jsx)(l.Z,{component:"label",children:(0,J.jsx)("input",(0,r.Z)((0,r.Z)({},C()),{},{id:"upload",hidden:!0,type:"file",accept:"*","max-file-size":"5120"}))}),(0,J.jsx)("img",{src:_e.Z,alt:""}),(0,J.jsx)(d.Z,{sx:{fontSize:"16px",fontWeight:400,textAlign:"center",mb:2,mt:1.75},children:"K\xe9o th\u1ea3 file ho\u1eb7c nh\u1ea5n v\xe0o n\xfat b\xean d\u01b0\u1edbi \u0111\u1ec3 t\u1ea3i file b\u1ea3ng h\xe0ng l\xean"}),(0,J.jsx)(H.Z,{size:"medium",variant:"outlined",sx:{color:v.Z.primary.button,border:"1px solid ".concat(v.Z.primary.button),textTransform:"none","&:hover":{border:"1px solid ".concat(v.Z.primary.button)}},children:"T\u1ea3i file l\xean"})]})),(0,J.jsx)(st,{isOpen:x,onClose:function(){m(!1)},err:y})]})},dt=n(80623),ut=g.createContext({}),pt=function(e){var t=e.children,n=e.value;return(0,J.jsx)(ut.Provider,{value:n,children:t})},ht=function(e){var t=e.showPrice,n=e.onShowPriceClick,r=e.children;return(0,J.jsx)(l.Z,{typography:"body2",sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",minWidth:"60px",px:1,backgroundColor:t?"primary.button":"transparent",color:t?"white":"black",fontWeight:"600",borderRadius:"inherit",cursor:"pointer"},onClick:n,children:r})},xt=function(e){var t,n=e.productTableOfProject,r=(0,f.I0)(),i=Ee().actions,a=function(){var e=(0,g.useContext)(ut);if(!e)throw new Error("useProductTableContext must be used within RootContextProvider");return e}(),o=a.showPrice,s=a.setShowPrice,u=(0,g.useState)(!1),p=(0,c.Z)(u,2),h=p[0],m=p[1];return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(he.ZP,{container:!0,spacing:10,children:[(0,J.jsx)(he.ZP,{item:!0,xs:!0,children:(0,J.jsxs)(x.Z,{direction:"row",alignItems:"center",spacing:5,sx:{py:1.25,px:3,borderRadius:1,border:"1px solid #C8CBCF"},children:[(0,J.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",flex:1},children:[(0,J.jsx)("img",{src:dt.Z,alt:"icon excel"}),(0,J.jsx)(d.Z,{color:"primary.hint",sx:{ml:1.25},children:null===(t=n.currentUploadedFile)||void 0===t?void 0:t.path})]}),(0,J.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,J.jsx)("img",{src:oe.Z,alt:"icon check success",style:{marginRight:"28px"}}),(0,J.jsx)("img",{src:ce.Z,style:{cursor:"pointer"},alt:"icon trash",onClick:function(){return m(!0)}})]})]})}),(0,J.jsx)(he.ZP,{item:!0,xs:"auto",children:(0,J.jsxs)(x.Z,{direction:"row",alignItems:"center",sx:{height:"100%"},children:[(0,J.jsx)(d.Z,{variant:"body2",fontWeight:600,children:"Gi\xe1 s\u1ea3n ph\u1ea9m:"}),(0,J.jsxs)(l.Z,{height:36,sx:{display:"inline-flex",alignItems:"center",border:"1px solid #C8CBCF",borderRadius:"999px",padding:"1px",ml:1.75},children:[(0,J.jsx)(ht,{showPrice:o,onShowPriceClick:function(){return s(!0)},children:"Hi\u1ec3n th\u1ecb"}),(0,J.jsx)(ht,{showPrice:!o,onShowPriceClick:function(){return s(!1)},children:"\u1ea8n"})]})]})})]}),(0,J.jsx)(ae.Z,{isOpen:h,handleClose:function(){return m(!1)},handleSubmit:function(){r(i.clearCurrentUploadedFile({id:n.id}))},isIcon:!1,actionName:"X\xe1c nh\u1eadn",children:(0,J.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,J.jsx)(d.Z,{fontSize:"24px",fontWeight:700,width:400,color:v.Z.primary.text,mx:"auto",mb:2,mt:2,textAlign:"center",children:"Xo\xe1 b\u1ea3ng h\xe0ng"}),(0,J.jsx)(d.Z,{fontSize:"16px",fontWeight:400,color:v.Z.primary.text,mb:5,textAlign:"center",children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafc mu\u1ed1n xo\xe1 b\u1ea3ng h\xe0ng hi\u1ec7n t\u1ea1i kh\xf4ng?"})]})})]})},mt=n(63501),gt=n(24511),ft=function(e){var t=e.projectType,n=((0,w.kh)().actions,(0,gt.$)()),i=(n.t,n.i18n,(0,f.I0)(),(0,f.v9)(We).uploadedProductTableList),a=(0,g.useState)({page:1,limit:10}),o=(0,c.Z)(a,2),s=o[0],l=o[1],d=(s.page-1)*s.limit,p=d+s.limit,h=null===i||void 0===i?void 0:i.data.slice(d,p),x=t===S.kA.GROUND,m=(0,g.useMemo)((function(){return[{id:"id",label:"M\xe3 s\u1ea3n ph\u1ea9m",align:"left",width:140},{id:"block",label:x?"Ph\xe2n khu":"Block",align:"center",width:100},{id:"floor",label:x?"L\xf4":"T\u1ea7ng",width:100,align:"center"},{id:"position",label:"V\u1ecb tr\xed c\u0103n",width:100,align:"center"},{id:"status",label:"Tr\u1ea1ng th\xe1i",width:140,align:"center"},{id:"bedroom",label:"Ph\xf2ng ng\u1ee7",width:120,align:"center"},{id:"direction",label:"H\u01b0\u1edbng",width:115,align:"center"},{id:"view1",label:"View 1",width:200,align:"center"},{id:"view2",label:"View 2",width:90,align:"center"},{id:"corner",label:x?"L\xf4 g\xf3c":"C\u0103n g\xf3c",width:112,align:"center"},{id:"carpetArea",label:(0,J.jsxs)("span",{children:["Di\u1ec7n t\xedch th\xf4ng thu\u1ef7 (m",(0,J.jsx)("sup",{children:"2"}),")"]}),width:140,align:"center"},{id:"buildUpArea",label:(0,J.jsxs)("span",{children:["Di\u1ec7n t\xedch Tim t\u01b0\u1eddng (m",(0,J.jsx)("sup",{children:"2"}),")"]}),width:140,align:"center"},{id:"pricePerSquareMetreNoVAT",label:(0,J.jsxs)("span",{children:["\u0110\u01a1n gi\xe1/(m",(0,J.jsx)("sup",{children:"2"}),")",(0,J.jsx)("br",{}),"(Ch\u01b0a VAT)"]}),width:140,align:"center"},{id:"pricePerSquareMetreHasVAT",label:(0,J.jsxs)("span",{children:["\u0110\u01a1n gi\xe1/(m",(0,J.jsx)("sup",{children:"2"}),")",(0,J.jsx)("br",{}),"(C\xf3 VAT)"]}),width:140,align:"center"},{id:"priceNoVAT",label:(0,J.jsxs)(J.Fragment,{children:["Gi\xe1",(0,J.jsx)("br",{}),"(Ch\u01b0a VAT)"]}),width:160,align:"center"},{id:"priceHasVAT",label:(0,J.jsxs)(J.Fragment,{children:["Gi\xe1",(0,J.jsx)("br",{}),"(C\xf3 VAT)"]}),width:160,align:"center"}]}),[]);m=m.filter((function(e){return x?!["position","bedroom"].includes(e.id):e}));return(0,J.jsx)(u.Z,{sx:{width:"100%",overflow:"hidden",padding:"14px 0px 0px 0px"},children:(0,J.jsx)(q.Z,{headers:m,renderItem:function(e,n){return t===S.kA.APARTMENT?[(0,J.jsx)(mt.D,{text:e.code,line:1}),(0,J.jsx)(mt.D,{text:e.block,line:1}),(0,J.jsx)(mt.D,{text:e.floor,line:1}),(0,J.jsx)(mt.D,{text:e.position,line:1}),(0,J.jsx)(mt.D,{text:e.status,line:1}),(0,J.jsx)(mt.D,{text:e.bedRoom,line:1}),(0,J.jsx)(mt.D,{text:e.area,line:1}),(0,J.jsx)(mt.D,{text:e.discription,line:1}),(0,J.jsx)(mt.D,{text:"-",line:1}),(0,J.jsx)(mt.D,{text:e.corner,line:1}),(0,J.jsx)(mt.D,{text:e.carpetArea,line:1}),(0,J.jsx)(mt.D,{text:e.builtUpArea,line:1}),(0,J.jsx)(mt.D,{text:e.unitPrice,line:1}),(0,J.jsx)(mt.D,{text:e.unitPriceVat,line:1}),(0,J.jsx)(mt.D,{text:e.price,line:1}),(0,J.jsx)(mt.D,{text:e.priceVat,line:1})]:[(0,J.jsx)(mt.D,{text:e.code,line:1}),(0,J.jsx)(mt.D,{text:e.block,line:1}),(0,J.jsx)(mt.D,{text:e.floor,line:1}),(0,J.jsx)(mt.D,{text:e.status,line:1}),(0,J.jsx)(mt.D,{text:e.area,line:1}),(0,J.jsx)(mt.D,{text:e.discription,line:1}),(0,J.jsx)(mt.D,{text:"-",line:1}),(0,J.jsx)(mt.D,{text:e.corner,line:1}),(0,J.jsx)(mt.D,{text:e.carpetArea,line:1}),(0,J.jsx)(mt.D,{text:e.builtUpArea,line:1}),(0,J.jsx)(mt.D,{text:e.unitPrice,line:1}),(0,J.jsx)(mt.D,{text:e.unitPriceVat,line:1}),(0,J.jsx)(mt.D,{text:e.price,line:1}),(0,J.jsx)(mt.D,{text:e.priceVat,line:1})]},items:h,pageNumber:s.page,totalElements:null===i||void 0===i?void 0:i.data.length,limitElement:s.limit,onPageChange:function(e){l((0,r.Z)((0,r.Z)({},s),{},{page:e}))},onPageSizeChange:function(e){l((0,r.Z)((0,r.Z)({},s),{},{limit:e}))}})})},bt=function(e){var t=e.productTableOfProject,n=e.projectType;return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(xt,{productTableOfProject:t}),(0,J.jsx)(ft,{projectType:n})]})},jt=function(e){var t=e.type,n=(0,b.UO)().id,r=(0,g.useState)(!1),i=(0,c.Z)(r,2),a=(i[0],i[1]),o=(0,g.useState)(null),s=(0,c.Z)(o,2),d=(s[0],s[1]),u=(0,f.I0)(),p=Ee().actions,h=(0,f.v9)(We).uploadedProductTableProjectList,x=(0,g.useMemo)((function(){var e=h.findIndex((function(e){return e.id===n}));return-1!==e?h[e]:null}),[n,h]);return(0,g.useEffect)((function(){return function(){u(p.clearCurrentUploadedFile({id:null!==n&&void 0!==n?n:""}))}}),[u,p,n]),(0,J.jsx)(l.Z,{children:x?(0,J.jsx)(bt,{productTableOfProject:x,projectType:t}):(0,J.jsx)(lt,{onUploadStateChange:function(e){a(e)},onChangeFile:function(e){d(e)},projectType:t})})},vt=["children","value","index"];function Zt(){var e=(0,b.UO)().id,t=(0,f.I0)(),n=(0,W.TV)().actions,r=(0,f.v9)(B.Y).ProjectDetail,i=(0,f.v9)(We).currentUploadedFile,T=(0,s.Z)(),C=(0,b.s0)(),D=(0,b.TH)().state,F=(0,g.useRef)(null),I=(0,g.useState)(!0),A=(0,c.Z)(I,2),R=A[0],U=A[1],E=(0,g.useState)(null),L=(0,c.Z)(E,2),z=L[0],M=L[1],N=(0,Z.Z)(0),O=N.handleTabChange,G=N.activeTab,q=N.setActiveTab,H=(0,w.kh)().actions,_=V().actions,X=D;(0,g.useEffect)((function(){return e&&t(n.getDetailProject({id:e})),function(){t(n.clearDataProject())}}),[n,t,e]),(0,g.useEffect)((function(){null!==X&&void 0!==X&&X.tabActive&&q(null===X||void 0===X?void 0:X.tabActive)}),[null===X||void 0===X?void 0:X.tabActive]);var Q=function(){var e=localStorage.getItem("imageMapProLastSave");if(e){var n=localStorage.getItem("imageMapProSaves");if(n){var r=JSON.parse(n).find((function(t){return t.id===e}));if(r.artboards[0].children){var i,a=(i=r,function(e){return i.artboards[0].children.every(e)});if(a((function(e){return"group"===e.type})))if(a((function(e){return""!==e.title.trim()}))){if(a((function(e){return e.children&&e.children.length>0})))return r;t(H.updateSnackbar({message:"M\u1ed9t ho\u1eb7c nhi\u1ec1u ph\xe2n khu ch\u01b0a c\xf3 s\u1ea3n ph\u1ea9m",type:"error"}))}else t(H.updateSnackbar({message:"M\u1ed9t ho\u1eb7c nhi\u1ec1u ph\xe2n khu ch\u01b0a \u0111\u01b0\u1ee3c \u0111\u1eb7t t\xean",type:"error"}));else t(H.updateSnackbar({message:"M\u1ed9t ho\u1eb7c nhi\u1ec1u s\u1ea3n ph\u1ea9m ch\u01b0a \u0111\u01b0\u1ee3c th\xeam v\xe0o ph\xe2n khu",type:"error"}))}else t(H.updateSnackbar({message:"Ch\u01b0a c\xf3 ph\xe2n khu n\xe0o",type:"error"}))}else t(H.updateSnackbar({message:"An error has been occurred",type:"error"}))}else t(H.updateSnackbar({message:"Ch\u01b0a c\xf3 th\xf4ng tin b\u1ea3ng h\xe0ng",type:"error"}))},K=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(){var r,i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(r=Q())&&((i=new FormData).append("json",JSON.stringify(r)),z&&i.append("file",z),t(_.createGroundProductTable({id:e,formData:i},(function(e){e.success?t(H.updateSnackbar({message:"T\u1ea1o b\u1ea3ng h\xe0ng \u0111\u1ea5t n\u1ec1n th\xe0nh c\xf4ng",type:"success"})):t(H.updateSnackbar({message:"T\u1ea1o b\u1ea3ng h\xe0ng \u0111\u1ea5t n\u1ec1n kh\xf4ng th\xe0nh c\xf4ng",type:"error"}))}))));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Y=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(){var r,o;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i){n.next=3;break}return t(H.updateSnackbar({message:"File upload kh\xf4ng t\u1ed3n t\u1ea1i",type:"error"})),n.abrupt("return");case 3:return n.prev=3,(r=new FormData).append("file",i),r.append("sheetName","Sheet1"),r.append("firstRow","2"),r.append("showPrice",R?"1":"0"),n.next=11,k.Z.uploadProductTable({formData:r,id:e});case 11:o=n.sent,t(H.updateSnackbar({message:o.message,type:"success"})),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(3),t(H.updateSnackbar({message:"Import kh\xf4ng th\xe0nh c\xf4ng",type:"error"}));case 18:case"end":return n.stop()}}),n,null,[[3,15]])})));return function(){return n.apply(this,arguments)}}();return(0,J.jsx)(J.Fragment,{children:(0,J.jsxs)(g.Fragment,{children:[(0,J.jsxs)(l.Z,{sx:{display:"flex",mb:3,alignItems:"center",justifyContent:"space-between"},children:[(0,J.jsxs)(l.Z,{display:"flex",sx:{alignItems:"center"},children:[(0,J.jsx)(l.Z,{mr:"15px",sx:{cursor:"pointer"},children:(0,J.jsx)("img",{src:y.Z,onClick:function(){return C(P.Z.project)},alt:""})}),(0,J.jsx)(d.Z,{fontSize:"20px",fontWeight:700,lineHeight:"24px",children:"Thi\u1ebft l\u1eadp b\u1ea3ng h\xe0ng"})]}),(0,J.jsx)(yt,{value:G,index:0,children:(0,J.jsx)(l.Z,{sx:{display:"flex",alignItems:"center"},children:(0,J.jsx)(m.Z,{title:"L\u01b0u c\u1eadp nh\u1eadt",isIcon:!0,typeButton:"submit",sxProps:{ml:"16px",borderRadius:"8px",width:{xs:"auto"},height:{xs:"44px"}},sxPropsText:{fontSize:"14px"},handleClick:function(){return function(e){var t;switch(e){case S.kA.APARTMENT:return void(null===(t=F.current)||void 0===t||t.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0})));case S.kA.GROUND:K();break;default:console.log("Error")}}(null===r||void 0===r?void 0:r.type)}})})}),(0,J.jsx)(yt,{value:G,index:1,children:(0,J.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,J.jsx)(j.rU,{style:{color:"transparent"},to:"/static/template/template_ProductTable.xlsx",download:"Template_BangHang",target:"_blank",children:(0,J.jsx)(m.Z,{title:"T\u1ea3i template",buttonMode:"download",isIcon:!0,sxProps:{ml:"16px",borderRadius:"8px",width:{xs:"auto"},height:{xs:"44px"}},sxPropsText:{fontSize:"14px"}})}),(0,J.jsx)(m.Z,{title:"L\u01b0u c\u1eadp nh\u1eadt",isIcon:!0,typeButton:"submit",sxProps:{ml:"16px",borderRadius:"8px",width:{xs:"auto"},height:{xs:"44px"}},sxPropsText:{fontSize:"14px"},handleClick:Y})]})})]}),(0,J.jsx)(u.Z,{sx:{width:"100%",overflow:"hidden"},children:(0,J.jsxs)(p.Z,{value:G,onChange:O,sx:{width:"100%",height:"100%","& .MuiTab-root.Mui-selected":{color:T.palette.common.black,fontWeight:700},background:T.palette.grey[300]},TabIndicatorProps:{style:{backgroundColor:v.Z.primary.button}},children:[(0,J.jsx)(h.Z,{sx:{fontSize:"16px",fontWeight:400},label:"T\u1ea1o b\u1ea3ng h\xe0ng"}),(0,J.jsx)(h.Z,{sx:{fontSize:"16px",fontWeight:400},label:"Upload th\xf4ng tin b\u1ea3ng h\xe0ng"})]})}),(0,J.jsxs)(l.Z,{sx:{backgroundColor:T.palette.grey[0],marginTop:"8px",borderRadius:"20px",height:"100%",width:"100%"},children:[(0,J.jsx)(yt,{value:G,index:0,children:(0,J.jsx)(x.Z,{sx:{p:3,height:"100%",width:"100%"},children:r&&(0,J.jsxs)(J.Fragment,{children:[r.type===S.kA.APARTMENT&&(0,J.jsx)(He,{ref:F}),r.type===S.kA.GROUND&&(0,J.jsx)(pe,{currentGroundImage:z,onFileChange:function(e){M(e)}})]})})}),(0,J.jsx)(yt,{value:G,index:1,children:(0,J.jsx)(l.Z,{sx:{p:3},children:(0,J.jsx)(pt,{value:{showPrice:R,setShowPrice:U},children:r&&(0,J.jsx)(jt,{type:r.type})})})}),(0,J.jsx)(yt,{value:G,index:2})]})]})})}var yt=function(e){var t=e.children,n=e.value,a=e.index,o=(0,i.Z)(e,vt);return(0,J.jsx)(l.Z,(0,r.Z)((0,r.Z)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),sx:{height:"100%"}},o),{},{children:n===a&&(0,J.jsx)(l.Z,{sx:{height:"100%",width:"100%"},children:t})}))}},23195:function(e,t,n){var r=n(64836);t.Z=void 0;var i=r(n(45045)),a=n(46417),o=(0,i.default)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=o},22611:function(e,t,n){var r=n(64836);t.Z=void 0;var i=r(n(45045)),a=n(46417),o=(0,i.default)((0,a.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");t.Z=o}}]);