"use strict";(self.webpackChunkctlotus_valuation=self.webpackChunkctlotus_valuation||[]).push([[34],{39034:function(e,t,n){n.r(t),n.d(t,{CityStar:function(){return _}});var i=n(29439),o=n(19860),l=n(10437),a=n(61113),r=n(48310),c=n(45624),s=n(25645),d=n(27314),u=n(47313),p=n(24511),x=n(31538),h=n(26002),m=n(65165),g=n(31421),f=n(68161),b=n(75184),Z=n(1413),v=n(70501),y=n(30604),C=n(63501),j=n(64351),S=n(2220),k=n(33222),w=n(97890),I=n(52387),D=n(10658),T=n.n(D),R=n(7193),M=n(35931),A=n(7791),F=n(83294),L=n(4942),N=n(17592),E=(0,N.ZP)(l.Z)((function(e){var t,n=e.theme;return t={minWidth:"200px",display:"inline-flex",backgroundColor:"".concat(n.palette.common.white," !important"),alignItems:"center",borderRadius:"8px",height:"41px"},(0,L.Z)(t,n.breakpoints.down("sm"),{width:"100%"}),(0,L.Z)(t,"input",{fontSize:"16px",paddingLeft:"16px",border:"none",height:"100%",width:"100%",outline:"none",background:"".concat(n.palette.secondary.lighter)}),t})),W=((0,N.ZP)("img")((function(e){e.theme;return{width:"40px",height:"40px",paddingLeft:"16px"}})),n(29466)),z=n(66253),P=n(46417);function Y(e){var t=(0,o.Z)(),n=(0,p.$)().t,r=e.isFilter,c=e.onChangeSearchInput,h=e.filterList,m=e.submitFilter,g=((0,k.I0)(),(0,z.RF)().actions,(0,W.lr)()),f=(0,i.Z)(g,2),b=f[0],Z=(f[1],(0,u.useState)((function(){var e;return null!==b&&void 0!==b&&b.get("query")?null===b||void 0===b||null===(e=b.get("query"))||void 0===e?void 0:e.replace("%2B","+"):""}))),v=(0,i.Z)(Z,2),y=v[0],C=v[1],j=(0,u.useRef)();return(0,P.jsxs)(l.Z,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},color:t.palette.secondary.contrastText,bgcolor:x.Z.primary.barList,borderRadius:"8px",mb:"15px",p:"20px 20px 8px 20px"},children:[(0,P.jsxs)(E,{className:"input",sx:{bgcolor:x.Z.common.white,"& input::placeholder":{color:"#AFAFAF"},border:"1px solid #D3D3D3",borderRadius:"8px",mr:"15px"},children:[(0,P.jsx)(a.Z,{sx:{fontSize:14,fontWeight:500,color:"#222222",background:t.palette.common.white,p:"0px 8px 0px 8px",mb:"45px",ml:"12px",position:"absolute"},children:"T\u1eeb kho\xe1 t\xecm ki\u1ebfm"}),(0,P.jsx)("input",{style:{borderRadius:"8px",backgroundColor:x.Z.common.white,fontSize:14,fontWeight:400,paddingRight:"15px"},type:"text",placeholder:"Nh\u1eadp t\u1eeb kho\xe1 t\xecm ki\u1ebfm",onChange:function(e){C(e.target.value),j.current&&clearTimeout(j.current),j.current=setTimeout((function(){c(e.target.value.replaceAll("+","%2B"))}),500)},value:y})]}),(0,P.jsx)(l.Z,{sx:{display:"flex",gap:{xs:"12px",sm:"0px"},alignItems:"center"},children:null===h||void 0===h?void 0:h.map((function(e){return(0,P.jsx)(u.Fragment,{children:"date"!==e.type&&(0,P.jsx)(F.Z,{label:e.label,list:e.options,handleSelected:e.handleSelected})},e.label)}))}),(0,P.jsxs)(l.Z,{sx:{display:"flex",gap:{xs:"12px",sm:"0px"},alignItems:"center"},children:[null===h||void 0===h?void 0:h.map((function(e){return(0,P.jsx)(u.Fragment,{children:"date"===e.type&&(0,P.jsx)(A.Z,{onChange:e.onChange,placeholder:null===e||void 0===e?void 0:e.placeholder,sx:{width:"213px"}})},e.label)})),(0,P.jsx)(a.Z,{sx:{fontSize:14,fontWeight:500,color:"#222222",background:t.palette.common.white,p:"0px 8px 0px 8px",mb:"47px",ml:"12px",position:"absolute"},children:"Th\u1eddi gian"})]}),r&&(0,P.jsx)(s.Z,{title:n(d.I.common.search),buttonMode:"filter",sxProps:{background:t.palette.common.white,color:x.Z.primary.button,border:"1px solid ".concat(x.Z.primary.button),borderRadius:"8px",":hover":{background:t.palette.common.white}},sxPropsText:{fontSize:"16px",fontWeight:400},handleClick:function(){null===m||void 0===m||m()}})]})}function B(){var e=(0,R.Wi)().actions,t=((0,w.s0)(),(0,o.Z)()),n=((0,j.kh)().actions,(0,p.$)()),l=n.t,r=(n.i18n,(0,k.I0)()),c=(0,k.v9)(M.i),s=c.CustomerCityStarManagement,x=c.isLoading,m=(0,u.useMemo)((function(){return{page:1,limit:20}}),[]),g=(0,u.useState)(m),b=(0,i.Z)(g,2),D=b[0],A=b[1],F=(0,u.useState)(""),L=(0,i.Z)(F,2),N=L[0],E=L[1],W=(0,u.useState)(!1),z=(0,i.Z)(W,2),B=z[0],_=z[1],G=(0,u.useState)(I.qb.INACTIVE),q=(0,i.Z)(G,2),V=q[0],O=(q[1],(0,u.useMemo)((function(){return[{id:"card_code",label:"M\xe3 th\u1ebb th\xe0nh vi\xean",width:180,align:"left"},{id:"type",label:"Lo\u1ea1i th\u1ebb",width:110,align:"left"},{id:"name",label:"T\xean kh\xe1ch h\xe0ng",width:180,align:"left"},{id:"birth",label:"Ng\xe0y sinh",width:130,align:"left"},{id:"email",label:"\u0110\u1ecba ch\u1ec9 Email",width:150,align:"left"},{id:"phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",width:130,align:"left"},{id:"indentify_number",label:"CMND/CCCD",width:130,align:"left"},{id:"active_date",label:"Ng\xe0y k\xedch ho\u1ea1t",width:140,align:"left"}]}),[l])),H=(0,h.L0)({onFetchData:function(e){K(e)},defaultFilter:m}),U=H.filter,$=H.onFilterToQueryString,K=function(t){r(e.fetchListCustomerCityStar(t))},Q=(0,u.useMemo)((function(){return[{label:"Lo\u1ea1i th\u1ebb",options:[{label:"B\u1ea1c",value:I.G8.SIVER},{label:"V\xe0ng",value:I.G8.GOLD},{label:"Kim C\u01b0\u01a1ng",value:I.G8.DIAMOND},{label:"B\u1ea1ch Kim",value:I.G8.PLATINUM},{label:"\u0110\u1ed1i T\xe1c",value:I.G8.PARTNER},{label:"\u0110\u1ea1i S\u1ee9",value:I.G8.AMBASSADOR}],handleSelected:function(e){A((0,Z.Z)((0,Z.Z)({},D),{},{typeCard:e}))}},{label:"Th\u1eddi gian",type:"date",placeholder:"Th\u1eddi gian t\u1ea1o",options:[],onChange:function(e){e?A((0,Z.Z)((0,Z.Z)({},D),{},{startDate:T()(e).format("YYYY-MM-DD")})):(null===D||void 0===D||delete D.startDate,A(D))}},{label:"Th\u1eddi gian k\u1ebft th\xfac",type:"date",placeholder:"Th\u1eddi gian k\u1ebft th\xfac",options:[],onChange:function(e){e?A((0,Z.Z)((0,Z.Z)({},D),{},{endDate:T()(e).format("YYYY-MM-DD")})):(null===D||void 0===D||delete D.endDate,A(D))}}]}),[D,N]);return(0,P.jsxs)(v.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,P.jsx)(Y,{onChangeSearchInput:function(e){E(e),$((0,Z.Z)((0,Z.Z)({},U),{},{search:e,page:1}))},placeholder:l(d.I.common.search),isFilter:!0,filterList:Q,submitFilter:function(){$((0,Z.Z)((0,Z.Z)({},D),{},{page:1,search:N}))}}),(0,P.jsx)(S.Z,{headers:O,onRequestSort:function(e,t){$((0,Z.Z)((0,Z.Z)({},U),{},{sortByName:"true"===(null===U||void 0===U?void 0:U.sortByName)?"false":"true"}))},renderItem:function(e,t){var n,i;return[(0,P.jsx)(C.D,{text:"".concat(e.customerCode),line:1,color:"#007AFF"}),(0,P.jsx)(C.D,{text:"".concat((0,f.dt)(null===e||void 0===e||null===(n=e.code)||void 0===n?void 0:n.typeCard)),line:1}),(0,P.jsx)(C.D,{text:"".concat(e.name),line:1}),(0,P.jsx)(C.D,{text:"".concat((0,f.tg)(e.birth)),line:1}),(0,P.jsx)(C.D,{text:"".concat(e.email),line:1}),(0,P.jsx)(C.D,{text:"".concat(e.phoneNumber),line:1}),(0,P.jsx)(C.D,{text:"".concat(e.identityNumber),line:1}),(0,P.jsx)(C.D,{text:"".concat((0,f.tg)(null===e||void 0===e||null===(i=e.code)||void 0===i?void 0:i.createdAt)),line:1})]},items:null===s||void 0===s?void 0:s.data,pageNumber:U.page,totalElements:null===s||void 0===s?void 0:s.total,sort:U.orderBy,limitElement:U.limit,onPageChange:function(e){$((0,Z.Z)((0,Z.Z)({},U),{},{page:e}))},onPageSizeChange:function(e){$((0,Z.Z)((0,Z.Z)({},U),{},{page:1,limit:e}))},isLoading:x,fullHeight:!0}),B&&(0,P.jsx)(y.Z,{isOpen:B,handleClose:function(){_(!1)},handleSubmit:function(){},actionName:V===I.qb.ACTIVE?l(d.I.common.unlock):l(d.I.common.lock),children:(0,P.jsx)(a.Z,{fontSize:"14px",fontWeight:700,color:t.palette.primary.light,mb:5,children:V===I.qb.ACTIVE?l(d.I.confirmMessage.unlock):l(d.I.confirmMessage.lock)})})]})}function _(){var e=(0,o.Z)(),t=(0,p.$)().t,n=(0,h.Un)(),Z=(0,u.useRef)(null),v=(0,u.useState)(!1),y=(0,i.Z)(v,2),C=y[0],j=y[1];return(0,P.jsxs)(u.Fragment,{children:[(0,P.jsx)(l.Z,{sx:{display:"flex",justifyContent:"end",paddingLeft:{xs:"12px",sm:"24px",lg:"0px"},paddingRight:{xs:"12px",sm:"24px",lg:"0px"}}}),(0,P.jsxs)(l.Z,{bgcolor:e.palette.grey[0],p:3,sx:{marginLeft:{xs:"12px",sm:"24px",lg:"0px"},marginRight:{xs:"12px",sm:"24px",lg:"0px"},borderRadius:3,mt:"-10px",minHeight:"calc(99%)"},children:[(0,P.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"50px"},children:[(0,P.jsx)(a.Z,{fontSize:"20px",fontWeight:"700",color:x.Z.primary.text,children:t(d.I.sidebar.customerCityStar)}),(0,P.jsx)(s.Z,{title:t(d.I.common.download),isIcon:!0,isHide:!(0,f.wI)(g.T.CUSTOMER_CITYSTAR_VIEW_ALL,n),propRef:Z,buttonMode:"download",sxProps:{background:x.Z.primary.button,borderRadius:1,mb:"20px"},handleClick:function(){j(!0)}}),(0,P.jsx)(b.Z,{open:C,onClose:function(){j(!1)},anchorEl:Z.current,sx:{width:"max-content"},children:(0,P.jsx)(r.Z,{children:(0,P.jsx)(c.Z,{sx:{":hover":{backgroundColor:"#FDEAF4"},m:"6px",borderRadius:"4px"},children:(0,P.jsx)(l.Z,{display:"flex",alignItems:"center",onClick:function(){m.Z.downloadCustomerMembershipExcel()},children:(0,P.jsx)(a.Z,{ml:1,fontSize:"14px",fontWeight:400,color:e.palette.common.black,children:"T\u1ea3i danh s\xe1ch kh\xe1ch h\xe0ng"})})})})})]}),(0,P.jsx)(B,{})]})]})}}}]);